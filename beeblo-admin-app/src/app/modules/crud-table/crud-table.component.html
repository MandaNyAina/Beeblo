<div class="crud-table">
    <div class="header">
      <div class="">
        <button class="btn btn-success p-mr-2" (click)="openNew()">
          Nouveau
          <i class="pi pi-plus"></i>
        </button>
        <button icon="pi pi-trash" class="btn btn-danger" (click)="deleteSelecteData()" [disabled]="!selectedData || !selectedData.length">
          <i class="pi pi-trash"></i>
        </button>
        <input (input)="dt.filterGlobal($event.target.value, 'contains')" type="text" [(ngModel)]="searchValue" (change)="onSearch()" placeholder="Rechercher" class="float-right form-control w-25"/>
      </div>
    </div>

    <div>
      <h3>{{title}}</h3>
    </div>

    <p-table #dt [value]="data" [lazy]="true" (onLazyLoad)="reloadData($event)"
      styleClass="p-datatable-responsive p-datatable-sm"
      [globalFilterFields]="globalFilter"
      [rowHover]="true" dataKey="globalFilter[0]"
      [showCurrentPageReport]="true"
      [paginator]="true" [rows]="10" [totalRecords]="totalRecords" [loading]="loading"
      [(selection)]="selectedData">
      <ng-template pTemplate="header">
          <tr>
              <th style="width: 3rem"><p-tableHeaderCheckbox ></p-tableHeaderCheckbox></th>
              <th *ngFor="let column of header" pSortableColumn="{{column.key}}">
                {{column.name}}
                <p-sortIcon field="{{column.key}}"></p-sortIcon>
              </th>
              <th style="width: 8rem" >Action</th>
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-customer>
          <tr *ngFor="let item of data; index as i">
              <td>
                <p-tableCheckbox [value]="i+1"></p-tableCheckbox>
              </td>
              <td *ngFor="let filter of filterField">{{item[filter.key]}}</td>
              <td>
                <button (click)="onEditLine(item)" pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success p-mr-2"></button>
                <button (click)="deleteOnRow(item)" pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning"></button>
            </td>
          </tr>
      </ng-template>
  </p-table>
  <p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>
</div>
